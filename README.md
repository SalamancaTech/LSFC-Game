Latent Space Fight Club: Migration Blueprint & Design DocTarget Audience: Autonomous Coding Agents / Human EngineersCurrent State: Single-file HTML5 Canvas PrototypeObjective: Refactor into a component-based engine (Godot/Unity/Phaser/React+Three.js)1. Core Identity & "Game Feel"Critical elements that must be preserved during migration. Do not treat these as "polish," they are core mechanics.Visual Style: "2.5D" Top-Down Oblique.Specification: Tiles are not true isometric diamonds. They are Cartesian rectangles with a Y-Scale compression of 0.75.Intent: Keeps WASD controls intuitive (Up = Up) while providing depth.The "Crash Zoom":Trigger: Random Encounter (15% chance per step).Behavior: Camera interpolates from Current Zoom to 4.5x Zoom over 1200ms using Cubic-In easing.Juice: Screen shake applies random X/Y offsets during the zoom.Combat Choreography:Moves must have distinct visual FX (Rock Drop, Paper Slice, Scissors Cut, etc.).Ties result in a "Clash" (Center screen collision + Spark).Victory/Defeat triggers specific animations (Victory Bounce vs. Death Spiral/Grayscale).2. Logic & MechanicsCombat System (RPSLS)The combat logic is a customized "Rock, Paper, Scissors, Lizard, Spock" loop.Data Structure (Matchups):{
  "Rock":     { "beats": ["Scissors", "Lizard"], "verbs": ["crushes", "crushes"] },
  "Paper":    { "beats": ["Rock", "Spock"],      "verbs": ["covers", "disproves"] },
  "Scissors": { "beats": ["Paper", "Lizard"],    "verbs": ["cuts", "decapitates"] },
  "Lizard":   { "beats": ["Spock", "Paper"],     "verbs": ["poisons", "eats"] },
  "Spock":    { "beats": ["Scissors", "Rock"],   "verbs": ["smashes", "vaporizes"] }
}

Damage Formula:Base Damage: 10Multiplier: 1 + (ComboCount * 0.5)Note: Combo resets to 0 on a loss or tie (design decision: high stakes).Collection & Procedural GenerationThe "Gotta Catch 'Em All" loop relies on procedural variation of a single asset base.Generation Algorithm:Name: [Prefix] + [Suffix] (e.g., "Neon Toad", "Glitch Ghost").Visual: Hue-Rotate(0-360deg) applied to the base enemy sprite.Stats: Randomized HP/Damage scaling with Player Level.The "Stabilize" (Catch) Mechanic:Trigger: A dedicated "Stabilize" button in combat.Formula: Chance = (1 - (CurrentHP / MaxHP)) * BaseRate.Success: Enemy is added to Player.Collection.Equip System: The player can "Sync" with a collected Latent, applying its Hue value to the Player Character sprite.Asset Pipeline (Ingestion)The prototype uses a robust localStorage caching system that should be replaced with a proper FileSystem/ResourceLoader in the new engine.Overworld Sprite:Input: 512x512 PNG.Layout: 2x2 Grid (Quadrants).Mapping:Top-Left: WestTop-Right: NorthBottom-Left: SouthBottom-Right: EastBattle Sprite:Input: 512x512 PNG.Layout: Single Static Pose.Procedural Textures (The "Nano Banana" Shader)The prototype generates textures at runtime to save space. In the new engine, these should be converted to Shaders or Static Assets.Grass: Noise-based scatter of 300 vertical lines (blades) on a green base.Water: Linear Gradient (Blue to Dark Blue) + Dynamic "Ripple" offset calculation (sin(time + x + y)).Trees: "Cluster" rendering. Do not use simple cones. Draw multiple overlapping circles with shadow offsets to simulate foliage volume.3. Architecture Migration GuideIf moving to Godot:Nodes: Use TileMap for the grid. Use CharacterBody2D for the player.Camera: Use Camera2D with Zoom property tweening for the encounter transition.Perspective: Set TileMap mode to Isometric (or simulate the 3/4 view by scaling the Y-axis of the parent Node2D to 0.75).Data: Convert MATCHUPS const to a Resource or JSON dictionary.If moving to Unity:Grid: Use Unity's 2D Isometric Tilemap system.State: Use ScriptableObjects to store the Move Data and Matchups.Animations: Use DoTween or standard AnimationCurves for the "Crash Zoom."If moving to React/Web:State: Move the STATE object (OVERWORLD, BATTLE, etc.) to a Redux slice or Context.Rendering: Swap the imperative Canvas API calls for a declarative library like react-three-fiber (for 3D) or PixiJS (for 2D).4. Current File Structure (Reference)generateMap(): Creates a 15x15 integer array (0=Grass, 1=Tree, 2=Water).drawWorld(): Main render loop. Handles the 3/4 projection math and Painter's Algorithm (sorting Y-depth).BattleFX: An async middleware object that handles DOM-based animations before resolving combat math.checkStorage(): Handles the loading of Base64 strings from LocalStorage (Keys: lfc_hero_sprite, lfc_battle_sprite).End of Specification